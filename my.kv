
Root:
    screen_manager: screen_manager
    orientation: 'vertical'
    MDToolbar:
        title: screen_manager.current
        MDIconButton:
            icon: 'coins'
            theme_text_color: 'Primary' if screen_manager.current == 'deposit' else 'Hint'
            on_release:
                screen_manager.transition.direction = 'right'
                screen_manager.current = 'deposit'
            pos_hint: {"center_y": .5}
        MDIconButton:
            icon: 'coin'
            theme_text_color: 'Primary' if screen_manager.current == 'main' else 'Hint'
            on_release:
                screen_manager.transition.direction = 'right' if screen_manager.current == 'setting' else 'left'
                screen_manager.current = 'main'
            pos_hint: {"center_y": .5}
        MDIconButton:
            icon: 'cogs'
            theme_text_color: 'Primary' if screen_manager.current == 'setting' else 'Hint'
            on_release:
                screen_manager.transition.direction = 'left'
                screen_manager.current = 'setting'
            pos_hint: {"center_y": .5}
    ScreenManager
        id: screen_manager
        MainScene:
        HistoryScene:
        SettingScene:

<MainScene>
    name: "main"

    total_saving: total_saving
    store: store

    FloatLayout:
        GridLayout:
            cols: 2
            size_hint: 0.5, 0.5
            pos_hint: {"x": 0.25, "y": 0.25}
            Label:
                text: "Your Goal $"
            Label:
                id: store
                text: store.text

            Label:
                text: "Your save $"
            Label:
                id: total_saving
                text: total_saving.text



<HistoryScene>
    name: "deposit"
    deposit: deposit
    button_deposit: button_deposit

    FloatLayout:
        BoxLayout:
            BoxLayout:

                MDTextField:
                    id: deposit
                    input_filter: "float"
                    hint_text: "Enter amount"
                    helper_text: "Only accept positive amount."
                    helper_text_mode: "on_error"
                    pos_hint: {"center_x": .5, "center_y": .5}
            BoxLayout:

                MDRoundFlatButton:
                    id: button_deposit
                    text: "Deposit"
                    pos_hint: {"center_x": .5, "center_y": .5}
                    on_release: root.update_history()
#            Button:
#
#                text: "Deposit" if button_deposit.state == "normal" else "Deposit" + deposit.text
#                background_color: (0.4, 0.3, 0.1, 1) if button_deposit.state == "normal" else (0.3, 0.3, 0.3, 1)
#



<SettingScene>
    name: "setting"

    objective: objective
    button_objective: button_objective
    button_reset: button_reset

    FloatLayout:
        GridLayout:
            cols: 3
            size_hint: 0.7, 0.1
            pos_hint: {"y": 0.5}
            Label:
                text: "Your Goal $"
            TextInput:
                id: objective
                size_hint: 0.5, 0.1
                multiline: False
                on_text: objective.text
                input_filter: "int"
            Button:
                id: button_objective
                text: "Register"
                background_color: (0.4, 0.3, 0.1, 1) if button_objective.state == "normal" else (0.3, 0.3, 0.3, 1)
                on_release: root.submit_objective()

        GridLayout:
            cols: 2
            size_hint: 0.7, 0.1
            pos_hint: {"y": 0.3}
            Label:
                text: "RESET all."
            Button:
                id: button_reset
                text: "reset"
                on_release: root.reset()
